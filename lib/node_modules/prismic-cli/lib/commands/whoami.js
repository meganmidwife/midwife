"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const command_1 = require("@oclif/command");
const prismic_1 = require("../prismic");
class Whoami extends prismic_1.Command {
    async run() {
        return this.prismic.validateSession()
            .then(res => {
            return this.log(res.data.email);
        })
            .catch(error => {
            var _a;
            const status = ((_a = error === null || error === void 0 ? void 0 : error.response) === null || _a === void 0 ? void 0 : _a.status) || 100;
            if (Math.floor(status / 100) === 4) {
                return this.log('Not logged in');
            }
            throw error;
        });
    }
}
exports.default = Whoami;
Whoami.description = 'Shows the email of the current user.';
Whoami.flags = {
    help: command_1.flags.help({ char: 'h' }),
};
