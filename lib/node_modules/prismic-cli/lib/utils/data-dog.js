"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const axios_1 = require("axios");
const serialize_error_1 = require("serialize-error");
async function datadog(error, payload) {
    const maybeError = typeof error === 'string' ? {} : serialize_error_1.serializeError(error);
    const sainPayload = Object.assign(Object.assign({}, maybeError), { context: Object.assign(Object.assign({}, payload), { config: Object.assign(Object.assign({}, payload.config), { plugins: [], pjson: {} }) }) });
    const data = {
        alert_type: 'error',
        priority: 'normal',
        source_type_name: 'NODE',
        host: 'prismic-cli',
        date_happened: Date.now(),
        title: typeof error === 'string' ? error : error.message,
        text: sainPayload,
    };
    return axios_1.default.post('https://ykz3r8yyd6.execute-api.us-east-1.amazonaws.com/stage/', data);
}
exports.default = datadog;
