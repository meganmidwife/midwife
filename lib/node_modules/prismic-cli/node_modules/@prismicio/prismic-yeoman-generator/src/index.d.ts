import * as Generator from 'yeoman-generator';
import type Prismic from 'prismic-cli/src/prismic/communication';
import type { CreateRepositoryArgs, CustomType } from 'prismic-cli/src/prismic/communication';
export interface TemplateOptions extends Generator.GeneratorOptions {
    force: boolean;
    path: string;
    prismic: Prismic;
    domain: string;
    pm?: 'yarn' | 'npm' | undefined;
    existingRepo?: boolean;
}
export interface PkgJson {
    dependencies?: Record<string, string>;
}
export default abstract class PrismicGenerator extends Generator {
    domain: string;
    force: boolean;
    path: string;
    prismic: Prismic;
    pm: 'yarn' | 'npm' | undefined;
    existingRepo: boolean;
    constructor(args: string | string[], opts: TemplateOptions);
    /**
     * Conditionally create a prismic repo.
     * @param {CreateRepositoryArgs} createRepositoryArgs - Parameters to uses when creating a repository.
     * @param {Boolean} [existingRepo = false] - skip creating a new prismic repository.
     * @returns {Promise<{data: String}>} - data being a conformation of the repository name.
     */
    maybeCreatePrismicRepository(createRepositoryArgs: CreateRepositoryArgs, existingRepo?: boolean): Promise<{
        data: string;
    }>;
    /**
     * Will infer to use yarn or npm and prompt the user to select a package manager when in doubt.
     * The result is assigned "this.pm" and return ed.
     * @example
     * ```ts
     * if(!this.pm) await this.promptForPackageManager()
     * ```
     *
     */
    promptForPackageManager(): Promise<'yarn' | 'npm'>;
    /**
     * Downloads a zip file and extracts it to yeoman's mem-fs.
     * Mainly use in the theme command/generator
     *
     * @param {string} source - the full url to a zip file with a template repo
     * @param {?string} innerFolder - the folder to extract from the downloaded zip file
     *
     * @example
     * ```ts
     * this.downloadAndExtractZipFrom('https://github.com/prismicio/fake-theme/archive/master.zip, 'fake-theme-master')
     * ```
     */
    downloadAndExtractZipFrom(source: string, innerFolder?: string): Promise<this>;
    private handleOldCustomTypes;
    private handleNewCustomTypes;
    /**
     * Read custom-types from mem-fs. This is used to send custom types during repo creation
     *
     * @param {?string} maybeCustomTypesDirectory - the directory to read the custom types from defaults to 'custom_types'
     * @returns {Array<CustomType>} - or an empty array
     *
     * @example
     * ```ts
     * this.downloadAndExtractZipFrom('https://github.com/prismicio/fake-theme/archive/master.zip, 'fake-theme-master')
     * const customTypes = this.readCustomTypesFrom('custom_types')
     * this.prismic.createRepository({ domain: this.domain, customTypes })
     * ```
     */
    readCustomTypesFrom(maybeCustomTypesDirectory?: string): Array<CustomType>;
    /**
     * Used in the theme generator,
     * This reads and formats the documents in the `documentsDirectory` so they can be sent to prismic during repo-creation.
     *
     * @param {?string} documentsDirectory - defaults to 'documents'
     * @returns {Documents} or undefined
     *
     * @example
     * ```ts
     * await this.downloadAndExtractZipFrom('https://github.com/prismicio/fake-theme/archive/master.zip, 'fake-theme-master')
     * const customTypes = this.readCustomTypesFrom('custom_types')
     * const documents = this.readDocumentsFrom('documents')
     * await this.prismic.createRepository({ domain: this.domain, customTypes, documents })
     * ```
     */
    readDocumentsFrom(documentsDirectory?: string): Documents | undefined;
    private branchFromUrl;
    private gitRepoFromUrl;
    /**
     * Used in the theme command and generators that use github urls so the inner folder of the downloaded zip can be extracted to mem-fs
     *
     * @param {string} source - a url to a zip file on github.
     * @returns a string that should be the inner folder of the zip file.
     * @example
     * ```ts
     * const url = 'https://github.com/prismicio/fake-theme/archive/master.zip'
     * this.innerFolderFromGitRepo(url) // fake-theme-master
     * ```
     */
    innerFolderFromGitRepo(source: string): string;
    copySliceTemplate(library: string, sliceName: string): void;
}
export interface Document {
    [key: string]: any;
}
export interface Documents {
    signature: string;
    documents: Document;
}
export interface SliceMachineJson {
    apiEndpoint: string;
    libraries: Array<string>;
    storybook?: string;
}
